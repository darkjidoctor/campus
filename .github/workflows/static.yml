<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAMPUS TAP - Your College Payment Wallet</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        :root {
            --primary-color: #007BFF;
            --secondary-color: #6C757D;
            --background-color: #f4f7f6;
            --card-bg-color: #ffffff;
            --text-color: #333;
            --success-color: #28a745;
            --danger-color: #dc3545;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .container { max-width: 1200px; margin: auto; padding: 0 20px; }
        
        /* --- LOGIN PAGE STYLES --- */
        #login-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://images.pexels.com/photos/7979105/pexels-photo-7979105.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1') no-repeat center center/cover;
            display: flex; justify-content: center; align-items: center; z-index: 2000; transition: opacity 0.5s ease;
        }
        .login-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); }
        .login-box {
            position: relative; z-index: 1; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            padding: 3rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
            width: 90%; max-width: 400px; animation: popIn 0.6s ease-out;
        }
        @keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        .login-box h2 { font-size: 2rem; color: var(--primary-color); margin-bottom: 2rem; }
        .login-box input { width: 100%; padding: 12px; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 8px; }
        .login-btn { width: 100%; padding: 15px; border: none; background: var(--primary-color); color: white;
            font-size: 1.1rem; font-weight: 600; border-radius: 8px; cursor: pointer; transition: background-color 0.3s ease; }
        .login-btn:hover { background-color: #0056b3; }

        /* --- APP CONTAINER --- */
        #app-container { display: none; }

        /* --- NAVBAR & TABS STYLING --- */
        .navbar {
            background: var(--card-bg-color); box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 0 1rem; position: sticky; top: 0; z-index: 1000;
        }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; }
        .navbar .logo { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; padding: 1rem 0;}
        .navbar .logo i { margin-right: 8px; }
        
        .nav-links .nav-tab {
            color: var(--text-color); text-decoration: none; font-weight: 600;
            display: inline-block; padding: 1.5rem 1rem; border-bottom: 4px solid transparent;
            transition: all 0.3s ease;
        }
        .nav-links .nav-tab:hover { color: var(--primary-color); }
        /* Style for the active tab */
        .nav-links .nav-tab.active {
            color: var(--primary-color);
            border-bottom: 4px solid var(--primary-color);
        }
        .nav-links #logout-btn { border-bottom: 4px solid transparent; } /* Logout button ko underline nahi chahiye */
        
        /* --- PAGE SECTIONS for TABS --- */
        .page-section {
            display: none; /* Hide all pages by default */
            padding: 2rem 0;
            animation: fadeIn 0.5s ease-in-out;
        }
        .page-section.active {
            display: block; /* Show only the active page */
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* General Card styles */
        .card {
            background: var(--card-bg-color); padding: 2rem; border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 2rem;
        }
        .card h2 { margin-bottom: 1.5rem; font-size: 1.8rem; text-align: center; }
        
        /* Specific content styles */
        .welcome-header { text-align: center; margin-bottom: 2rem; }
        .wallet-card { text-align: center; }
        .wallet-balance { font-size: 4rem; font-weight: 700; color: var(--primary-color); margin-bottom: 1.5rem; }
        .wallet-balance sup { font-size: 2rem; }
        .action-buttons .btn-success { background: var(--success-color); color: #fff; padding: 12px 25px; border-radius: 50px;
            font-weight: 600; border: none; cursor: pointer; transition: transform 0.2s ease;
        }
        .action-buttons .btn-success:hover { transform: translateY(-3px); }
        .menu-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #e9ecef; }
        .buy-btn { background: var(--primary-color); color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
        .transaction-table { width: 100%; border-collapse: collapse; }
        .transaction-table th, .transaction-table td { padding: 15px; text-align: left; border-bottom: 1px solid #e9ecef; }
        .transaction-table .amount { font-weight: 600; color: var(--danger-color); }
        .profile-card ul { list-style: none; padding: 0; }
        .profile-card li { display: flex; align-items: center; font-size: 1.1rem; padding: 12px 0; border-bottom: 1px solid #eee; }
        .profile-card li i { color: var(--primary-color); margin-right: 15px; width: 20px; text-align: center; }
        .profile-card li .status-active { color: var(--success-color); font-weight: 700; }
        
        footer { text-align: center; padding: 2rem 0; margin-top: 2rem; color: var(--secondary-color); font-size: 0.9rem; }
        
        /* --- SUPPORT CHAT STYLES --- */
        #chat-bubble {
            position: fixed;
            bottom: 25px;
            right: 25px;
            width: 60px;
            height: 60px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1001; /* Above navbar */
            transition: transform 0.3s ease;
        }
        #chat-bubble:hover {
            transform: scale(1.1);
            background-color: #0056b3;
        }
        #chat-window {
            position: fixed;
            bottom: 100px;
            right: 25px;
            width: 350px;
            max-width: 90vw;
            height: 450px;
            background: var(--card-bg-color);
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            display: none; /* Initially hidden */
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: translateY(20px);
            opacity: 0;
        }
        #chat-window.visible {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }
        .chat-header {
            background: var(--primary-color);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }
        .chat-header #close-chat-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            line-height: 1;
        }
        .chat-body {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: var(--background-color);
        }
        .chat-message {
            margin-bottom: 1rem;
            max-width: 80%;
            display: flex;
        }
        .chat-message p {
            padding: 10px 15px;
            border-radius: 20px;
            line-height: 1.4;
            margin: 0;
            word-wrap: break-word;
        }
        .chat-message.user {
            margin-left: auto;
            justify-content: flex-end;
        }
        .chat-message.user p {
            background: var(--primary-color);
            color: white;
            border-bottom-right-radius: 5px;
        }
        .chat-message.support p {
            background: #e9ecef;
            color: var(--text-color);
            border-bottom-left-radius: 5px;
        }
        .chat-footer {
            padding: 0.75rem;
            border-top: 1px solid #e9ecef;
            background-color: #fff;
        }
        .chat-footer form {
            display: flex;
            align-items: center;
        }
        .chat-footer input {
            flex-grow: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 10px 15px;
            margin-right: 10px;
        }
        .chat-footer button {
            background: var(--primary-color);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s;
        }
        .chat-footer button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <div id="login-page">
        <div class="login-overlay"></div>
        <div class="login-box">
            <h2><i class="fa-solid fa-wallet"></i> CAMPUS TAP Login</h2>
            <form id="login-form">
                <input type="text" id="username" placeholder="Enter Your Name" required>
                <input type="password" id="password" placeholder="Password" value="12345">
                <button type="submit" class="login-btn">Login Securely</button>
            </form>
        </div>
    </div>
    
    <div id="app-container">
        <header class="navbar">
            <div class="container">
                <a href="#" class="logo"><i class="fa-solid fa-wallet"></i> CAMPUS TAP</a>
                <nav class="nav-links">
                    <a href="#" class="nav-tab active" data-target="dashboard-page">Dashboard</a>
                    <a href="#" class="nav-tab" data-target="menu-page">Canteen Menu</a>
                    <a href="#" class="nav-tab" data-target="profile-page">Profile</a>
                    <a href="#" class="nav-tab" data-target="history-page">History</a>
                    <a href="#" id="logout-btn" class="nav-tab">Logout</a>
                </nav>
            </div>
        </header>

        <main>
            <div class="container">
                <div id="dashboard-page" class="page-section active">
                    <div class="welcome-header">
                        <h1 id="welcome-heading">Welcome Back!</h1>
                        <p>Your hassle-free campus experience starts here.</p>
                    </div>
                    <div class="card wallet-card">
                        <h2>Current Wallet Balance</h2>
                        <div class="wallet-balance"><sup>₹</sup><span id="balance-amount">250.50</span></div>
                        <div class="action-buttons"><button id="add-money-btn" class="btn-success"><i class="fa-solid fa-plus"></i> Add Money</button></div>
                    </div>
                </div>

                <div id="menu-page" class="page-section">
                    <div class="card menu-card">
                        <h2><i class="fa-solid fa-utensils"></i> Canteen Menu</h2>
                        <div id="menu-items-container"></div>
                    </div>
                </div>
                
                <div id="profile-page" class="page-section">
                    <div class="card profile-card">
                        <h2><i class="fa-solid fa-user-circle"></i> Student Profile</h2>
                        <ul>
                            <li><i class="fa-solid fa-user"></i> <span id="profile-name">Aman Kumar</span></li>
                            <li><i class="fa-solid fa-hashtag"></i> <span>21CS105</span></li>
                            <li><i class="fa-solid fa-id-card"></i> <span class="status-active">Card Status: Active</span></li>
                        </ul>
                    </div>
                </div>

                <div id="history-page" class="page-section">
                     <div class="card history-card">
                        <h2><i class="fa-solid fa-receipt"></i> Recent Transaction History</h2>
                        <table class="transaction-table">
                            <thead><tr><th>Date & Time</th><th>Items Purchased</th><th>Amount</th></tr></thead>
                            <tbody id="transaction-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <div id="chat-bubble">
            <i class="fa-solid fa-comment-dots"></i>
        </div>

        <div id="chat-window">
            <div class="chat-header">
                <h3>Support Chat</h3>
                <button id="close-chat-btn">&times;</button>
            </div>
            <div class="chat-body" id="chat-body">
                <div class="chat-message support">
                    <p>Hello! How can we help you today?</p>
                </div>
            </div>
            <div class="chat-footer">
                <form id="chat-form">
                    <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off" required>
                    <button type="submit"><i class="fa-solid fa-paper-plane"></i></button>
                </form>
            </div>
        </div>

        <footer><p>&copy; 2025 CAMPUS TAP. A project for modernizing our college.</p></footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const loginPage = document.getElementById('login-page');
        const appContainer = document.getElementById('app-container');
        const loginForm = document.getElementById('login-form');
        const logoutBtn = document.getElementById('logout-btn');
        const usernameInput = document.getElementById('username');
        const welcomeHeading = document.getElementById('welcome-heading');
        const profileName = document.getElementById('profile-name');
        
        // --- LOGIN/LOGOUT LOGIC ---
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault(); 
            const username = usernameInput.value.trim();
            if (username) {
                welcomeHeading.innerText = `Welcome Back, ${username}!`;
                profileName.innerText = username;
                loginPage.style.opacity = '0';
                setTimeout(() => {
                    loginPage.style.display = 'none';
                    appContainer.style.display = 'block'; 
                }, 500);
            } else {
                alert("Please enter your name.");
            }
        });
        
        logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm("Are you sure you want to logout?")) {
                loginForm.reset();
                appContainer.style.display = 'none';
                loginPage.style.display = 'flex';
                setTimeout(() => { loginPage.style.opacity = '1'; }, 10);
            }
        });

        // --- TAB SWITCHING LOGIC ---
        const navTabs = document.querySelectorAll('.nav-tab');
        const pageSections = document.querySelectorAll('.page-section');

        navTabs.forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();

                if (tab.id === 'logout-btn') return;

                navTabs.forEach(item => item.classList.remove('active'));
                pageSections.forEach(section => section.classList.remove('active'));

                tab.classList.add('active');
                const targetPageId = tab.dataset.target;
                document.getElementById(targetPageId).classList.add('active');
            });
        });


        // --- Campus App Logic ---
        const balanceAmountEl = document.getElementById('balance-amount');
        const transactionBody = document.getElementById('transaction-body');
        const addMoneyBtn = document.getElementById('add-money-btn');
        const menuItemsContainer = document.getElementById('menu-items-container');

        let transactions = [ { date: 'June 10, 2025, 10:05 AM', item: 'Samosa (2), Chai (1)', amount: 40.00 } ];
        const menuItems = [ { name: 'Samosa', price: 15.00 }, { name: 'Chai', price: 10.00 }, { name: 'Cold Coffee', price: 50.00 }, { name: 'Veg Maggi', price: 45.00 }, { name: 'Chole Bhature', price: 70.00 }];

        function renderTransactions() {
            transactionBody.innerHTML = '';
            transactions.forEach(tx => {
                const row = document.createElement('tr');
                row.innerHTML = `<td>${tx.date}</td><td>${tx.item}</td><td class="amount">- ₹${tx.amount.toFixed(2)}</td>`;
                transactionBody.appendChild(row);
            });
        }

        function renderMenu() {
            menuItemsContainer.innerHTML = '';
            menuItems.forEach(item => {
                const menuItemEl = document.createElement('div');
                menuItemEl.className = 'menu-item';
                menuItemEl.innerHTML = `<span>${item.name} - ₹${item.price.toFixed(2)}</span><button class="buy-btn" data-name="${item.name}" data-price="${item.price}">Buy</button>`;
                menuItemsContainer.appendChild(menuItemEl);
            });
        }

        function buyItem(name, price) {
            let currentBalance = parseFloat(balanceAmountEl.innerText);
            if (currentBalance >= price) {
                balanceAmountEl.innerText = (currentBalance - price).toFixed(2);
                const newTx = {
                    date: new Date().toLocaleString('en-US', { month: 'long', day: 'numeric', year: 'numeric', hour: 'numeric', minute: '2-digit', hour12: true }),
                    item: name, amount: price
                };
                transactions.unshift(newTx);
                renderTransactions();
            } else {
                alert("Insufficient Balance!");
            }
        }
        
        addMoneyBtn.addEventListener('click', () => {
            const amount = parseFloat(prompt("Enter amount to add:", "500"));
            if (amount && !isNaN(amount)) {
                balanceAmountEl.innerText = (parseFloat(balanceAmountEl.innerText) + amount).toFixed(2);
            }
        });

        menuItemsContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('buy-btn')) {
                buyItem(e.target.dataset.name, parseFloat(e.target.dataset.price));
            }
        });

        renderMenu();
        renderTransactions();
        
        // --- SUPPORT CHAT LOGIC ---
        const chatBubble = document.getElementById('chat-bubble');
        const chatWindow = document.getElementById('chat-window');
        const closeChatBtn = document.getElementById('close-chat-btn');
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatBody = document.getElementById('chat-body');

        function toggleChat(show) {
            if(show) {
                chatWindow.classList.add('visible');
                chatBubble.style.display = 'none';
            } else {
                chatWindow.classList.remove('visible');
                chatBubble.style.display = 'flex';
            }
        }

        chatBubble.addEventListener('click', () => toggleChat(true));
        closeChatBtn.addEventListener('click', () => toggleChat(false));

        chatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const messageText = chatInput.value.trim();
            if (messageText) {
                // 1. Add user's message to chat body
                const userMessageEl = document.createElement('div');
                userMessageEl.className = 'chat-message user';
                userMessageEl.innerHTML = `<p>${messageText.replace(/</g, "&lt;").replace(/>/g, "&gt;")}</p>`;
                chatBody.appendChild(userMessageEl);

                // 2. Clear input and scroll to bottom
                chatInput.value = '';
                chatBody.scrollTop = chatBody.scrollHeight;

                // 3. Simulate bot reply
                setTimeout(() => {
                    const supportMessageEl = document.createElement('div');
                    supportMessageEl.className = 'chat-message support';
                    supportMessageEl.innerHTML = `<p>Thanks for your message! A support agent will be with you shortly.</p>`;
                    chatBody.appendChild(supportMessageEl);
                    chatBody.scrollTop = chatBody.scrollHeight;
                }, 1500);
            }
        });

    });
    </script>
</body>
</html>
